# Data Transfer - 数据包传输测试工具

基于 pcapfile-io 包开发的高性能图形界面数据包传输测试工具，支持发送和接收 pcap 数据集。

## 功能特性

### 发送功能

- 读取 pcap 数据集并按时间戳顺序发送
- 支持单播、广播、组播三种传输模式
- 可配置发送速率（Mbps）
- 基于原始数据包时间戳的精确时序控制
- 实时显示发送统计信息

### 接收功能

- 接收 UDP 数据包并保存为 pcap 数据集
- 支持单播、广播、组播三种接收模式
- 可设置最大接收包数限制
- 自动生成索引文件以提高后续读取性能
- 实时显示接收统计信息

## 安装

### 前提条件

- Rust 1.70+
- pcapfile-io 库（作为本地依赖）

### 编译

```bash
cd pcap-transfer
cargo build --release
```

## 使用方法

启动应用程序后，将显示图形界面，您可以选择发送或接收模式：

### 发送模式

1. 点击"发送数据"按钮
2. 选择 pcap 数据集文件路径
3. 配置目标 IP 地址和端口
4. 选择网络类型（单播/广播/组播）
5. 可选配置网络接口
6. 点击"开始发送"按钮

### 接收模式

1. 点击"接收数据"按钮
2. 选择输出目录路径
3. 输入数据集名称
4. 配置监听 IP 地址和端口
5. 选择网络类型（单播/广播/组播）
6. 可选配置网络接口和最大接收包数
7. 点击"开始接收"按钮

## 网络模式说明

### 单播（Unicast）

- 点对点传输
- 目标地址为具体的 IP 地址
- 适用于一对一的数据传输测试

### 广播（Broadcast）

- 向网络内所有主机发送
- 目标地址通常为 x.x.x.255
- 适用于网络性能测试

### 组播（Multicast）

- 向组播组内的主机发送
- 目标地址为组播地址（224.0.0.0-239.255.255.255）
- 适用于一对多的数据分发测试

## 使用示例

### 端到端测试场景

1. **发送端配置**：
   - 选择测试数据集路径
   - 设置目标地址为 192.168.1.100
   - 设置端口为 8080
   - 选择单播模式

2. **接收端配置**：
   - 设置输出路径为 ./received
   - 输入数据集名称为 test_received
   - 设置监听地址为 0.0.0.0
   - 设置端口为 8080
   - 设置最大包数为 100000

### 组播测试场景

1. **发送端配置**：
   - 选择组播测试数据集
   - 设置目标地址为 224.1.1.1
   - 设置端口为 9090
   - 选择组播模式

2. **多个接收端配置**：
   - 每个接收端都设置相同的组播地址 224.1.1.1
   - 端口设置为 9090
   - 选择组播模式
   - 分别设置不同的输出路径和数据集名称

## 性能特点

- **高精度时序控制**: 基于原始数据包时间戳进行纳秒级精确发送
- **原始模式复现**: 完整保持原始数据包的传输时序特征
- **高性能发送**: 优化的发送逻辑，支持高速数据传输
- **实时统计**: 提供实时的传输速率和统计信息
- **内存高效**: 流式处理，支持大型数据集
- **错误处理**: 完善的错误处理和恢复机制

## 界面功能

### 实时统计显示

图形界面会实时显示传输统计信息，包括：

- **发送模式**：
  - 已发送包数和字节数
  - 当前传输速率
  - 错误计数
  - 传输进度

- **接收模式**：
  - 已接收包数和字节数
  - 当前接收速率
  - 错误计数
  - 接收进度（如果设置了最大包数）

### 操作控制

- **开始/停止**：可以随时开始或停止传输操作
- **配置保存**：界面会记住上次的配置设置
- **文件选择**：提供友好的文件和目录选择对话框

## 许可证

MIT License

## 依赖项目

- [pcapfile-io](../pcapfile-io) - 高性能 PCAP 文件读写库
